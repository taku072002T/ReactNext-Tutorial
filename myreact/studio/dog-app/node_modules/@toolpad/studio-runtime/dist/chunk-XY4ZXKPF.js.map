{"version":3,"sources":["../src/useUrlQueryState.ts"],"sourcesContent":["import * as React from 'react';\n\nfunction getLocationUrl() {\n  return new URL((window.top ?? window).location.href);\n}\n\nexport default function useUrlQueryState(\n  param: string,\n  defaultValue: string = '',\n): [string, React.Dispatch<React.SetStateAction<string>>] {\n  const [value, setValue] = React.useState(defaultValue);\n  const isInitialized = React.useRef(false);\n\n  React.useEffect(() => {\n    const url = getLocationUrl();\n    const currentUrlValue = url.searchParams.get(param);\n    if (isInitialized.current) {\n      if (currentUrlValue !== value) {\n        if (currentUrlValue === defaultValue) {\n          url.searchParams.delete(param);\n        } else {\n          url.searchParams.set(param, value);\n        }\n        window.history.pushState(null, '', String(url));\n      }\n    } else {\n      if (typeof currentUrlValue === 'string') {\n        setValue(currentUrlValue);\n      }\n      isInitialized.current = true;\n    }\n  }, [param, value, defaultValue]);\n\n  React.useEffect(() => {\n    const handlePopState = () => {\n      const url = getLocationUrl();\n      const urlQueryValue = url.searchParams.get(param);\n      setValue(urlQueryValue ?? defaultValue);\n    };\n\n    window.addEventListener('popstate', handlePopState);\n    return () => {\n      window.removeEventListener('popstate', handlePopState);\n    };\n  }, [param, defaultValue]);\n\n  return [value, setValue];\n}\n"],"mappings":";AAAA,YAAY,WAAW;AAEvB,SAAS,iBAAiB;AACxB,SAAO,IAAI,KAAK,OAAO,OAAO,QAAQ,SAAS,IAAI;AACrD;AAEe,SAAR,iBACL,OACA,eAAuB,IACiC;AACxD,QAAM,CAAC,OAAO,QAAQ,IAAU,eAAS,YAAY;AACrD,QAAM,gBAAsB,aAAO,KAAK;AAExC,EAAM,gBAAU,MAAM;AACpB,UAAM,MAAM,eAAe;AAC3B,UAAM,kBAAkB,IAAI,aAAa,IAAI,KAAK;AAClD,QAAI,cAAc,SAAS;AACzB,UAAI,oBAAoB,OAAO;AAC7B,YAAI,oBAAoB,cAAc;AACpC,cAAI,aAAa,OAAO,KAAK;AAAA,QAC/B,OAAO;AACL,cAAI,aAAa,IAAI,OAAO,KAAK;AAAA,QACnC;AACA,eAAO,QAAQ,UAAU,MAAM,IAAI,OAAO,GAAG,CAAC;AAAA,MAChD;AAAA,IACF,OAAO;AACL,UAAI,OAAO,oBAAoB,UAAU;AACvC,iBAAS,eAAe;AAAA,MAC1B;AACA,oBAAc,UAAU;AAAA,IAC1B;AAAA,EACF,GAAG,CAAC,OAAO,OAAO,YAAY,CAAC;AAE/B,EAAM,gBAAU,MAAM;AACpB,UAAM,iBAAiB,MAAM;AAC3B,YAAM,MAAM,eAAe;AAC3B,YAAM,gBAAgB,IAAI,aAAa,IAAI,KAAK;AAChD,eAAS,iBAAiB,YAAY;AAAA,IACxC;AAEA,WAAO,iBAAiB,YAAY,cAAc;AAClD,WAAO,MAAM;AACX,aAAO,oBAAoB,YAAY,cAAc;AAAA,IACvD;AAAA,EACF,GAAG,CAAC,OAAO,YAAY,CAAC;AAExB,SAAO,CAAC,OAAO,QAAQ;AACzB;","names":[]}