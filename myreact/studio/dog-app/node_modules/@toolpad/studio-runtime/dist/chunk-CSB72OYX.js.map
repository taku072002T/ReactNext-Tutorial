{"version":3,"sources":["../src/auth.ts"],"sourcesContent":["import type express from 'express';\nimport { JWT, getToken } from '@auth/core/jwt';\nimport { adaptRequestFromExpressToFetch } from '@toolpad/utils/httpApiAdapters';\n\nexport async function getUserToken(req: express.Request): Promise<JWT | null> {\n  let token = null;\n  if (process.env.TOOLPAD_AUTH_SECRET) {\n    const request = adaptRequestFromExpressToFetch(req);\n\n    // @TODO: Library types are wrong as salt should not be required, remove once fixed\n    // Github discussion: https://github.com/nextauthjs/next-auth/discussions/9133\n    // @ts-ignore\n    token = await getToken({\n      req: request,\n      secret: process.env.TOOLPAD_AUTH_SECRET,\n    });\n  }\n\n  return token;\n}\n"],"mappings":";AACA,SAAc,gBAAgB;AAC9B,SAAS,sCAAsC;AAE/C,eAAsB,aAAa,KAA2C;AAC5E,MAAI,QAAQ;AACZ,MAAI,QAAQ,IAAI,qBAAqB;AACnC,UAAM,UAAU,+BAA+B,GAAG;AAKlD,YAAQ,MAAM,SAAS;AAAA,MACrB,KAAK;AAAA,MACL,QAAQ,QAAQ,IAAI;AAAA,IACtB,CAAC;AAAA,EACH;AAEA,SAAO;AACT;","names":[]}