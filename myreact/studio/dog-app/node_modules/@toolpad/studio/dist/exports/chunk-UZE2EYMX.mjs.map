{"version":3,"sources":["../../src/utils/har.ts"],"sourcesContent":["import type { Har } from 'har-format';\n\n/**\n * Initializes an empty HAR object.\n */\nexport function createHarLog(): Har {\n  return {\n    log: {\n      version: '0.0',\n      creator: {\n        name: 'Toolpad',\n        version: process.env.TOOLPAD_VERSION || '',\n      },\n      entries: [],\n    },\n  };\n}\n\ninterface WithStartedDateTime {\n  startedDateTime: string;\n}\n\nfunction oldestFirst(a: WithStartedDateTime, b: WithStartedDateTime): number {\n  return new Date(a.startedDateTime).valueOf() - new Date(b.startedDateTime).valueOf();\n}\n\n/**\n * Merge two HAR files into a new one.\n */\nexport function mergeHar(target: Har, ...src: Har[]): Har {\n  for (const har of src) {\n    if (har.log.pages) {\n      if (!target.log.pages) {\n        target.log.pages = [];\n      }\n      target.log.pages.push(...har.log.pages);\n    }\n    target.log.entries.push(...har.log.entries);\n  }\n\n  target.log.entries.sort(oldestFirst);\n\n  if (target.log.pages) {\n    target.log.pages.sort(oldestFirst);\n  }\n\n  return target;\n}\n"],"mappings":";AAKO,SAAS,eAAoB;AAClC,SAAO;AAAA,IACL,KAAK;AAAA,MACH,SAAS;AAAA,MACT,SAAS;AAAA,QACP,MAAM;AAAA,QACN,SAAS,QAAQ,IAAI,mBAAmB;AAAA,MAC1C;AAAA,MACA,SAAS,CAAC;AAAA,IACZ;AAAA,EACF;AACF;AAMA,SAAS,YAAY,GAAwB,GAAgC;AAC3E,SAAO,IAAI,KAAK,EAAE,eAAe,EAAE,QAAQ,IAAI,IAAI,KAAK,EAAE,eAAe,EAAE,QAAQ;AACrF;AAKO,SAAS,SAAS,WAAgB,KAAiB;AACxD,aAAW,OAAO,KAAK;AACrB,QAAI,IAAI,IAAI,OAAO;AACjB,UAAI,CAAC,OAAO,IAAI,OAAO;AACrB,eAAO,IAAI,QAAQ,CAAC;AAAA,MACtB;AACA,aAAO,IAAI,MAAM,KAAK,GAAG,IAAI,IAAI,KAAK;AAAA,IACxC;AACA,WAAO,IAAI,QAAQ,KAAK,GAAG,IAAI,IAAI,OAAO;AAAA,EAC5C;AAEA,SAAO,IAAI,QAAQ,KAAK,WAAW;AAEnC,MAAI,OAAO,IAAI,OAAO;AACpB,WAAO,IAAI,MAAM,KAAK,WAAW;AAAA,EACnC;AAEA,SAAO;AACT;","names":[]}